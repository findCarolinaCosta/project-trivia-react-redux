(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{35:function(e,t,a){e.exports=a(51)},40:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},49:function(e,t){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),s=(a(40),a(7)),o=a(34),l=(a(45),a(3)),u=a(22),m=a(4),p=a(5),d=a(8),h=a(6),b=a(2),v=a(9),f=a(11),k=a.n(f),y=a(17),g=function(){var e,t;return k.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return e=a.sent,a.next=6,k.a.awrap(e.json());case 6:return t=a.sent,a.abrupt("return",e.ok?Promise.resolve(t.token):Promise.reject(t));case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])},E=function(e){var t,a,n;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 3:return t=r.sent,r.next=6,k.a.awrap(t.json());case 6:return a=r.sent,n=a.results,r.abrupt("return",n);case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:case"end":return r.stop()}}),null,null,[[0,11]])},O=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={name:"",email:""},e.handleInputChange=e.handleInputChange.bind(Object(b.a)(e)),e.onClick=e.onClick.bind(Object(b.a)(e)),e.onSubmit=e.onSubmit.bind(Object(b.a)(e)),e}return Object(v.a)(t,e),Object(p.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.history,n=t.dispatch,r=this.state,i=r.name,c=r.email;n((function(e){var t;return k.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.awrap(g());case 3:t=a.sent,localStorage.setItem("token",t),e({type:"GET_PLAYER_TOKEN",token:t}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),null,null,[[0,8]])})),n({type:"GET-USER",data:{name:i,email:c}});var s={player:{name:i,assertions:[],score:0,gravatarEmail:c}};localStorage.setItem("state",JSON.stringify(s)),localStorage.setItem("ranking",[]),a.push("/game")}},{key:"onClick",value:function(){this.props.history.push("./settings")}},{key:"handleInputChange",value:function(e){var t=e.target;this.setState(Object(u.a)({},t.name,t.value))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=t&&a;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{"data-testid":"input-player-name",type:"text",name:"name",onChange:this.handleInputChange,value:t}),r.a.createElement("input",{"data-testid":"input-gravatar-email",type:"text",name:"email",onChange:this.handleInputChange,value:a}),r.a.createElement("button",{"data-testid":"btn-play",type:"submit",disabled:!n},"Jogar"),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:this.onClick},"Configura\xe7\xf5es"))}}]),t}(r.a.Component),j=Object(s.b)((function(e){return{token:e.token}}))(O),S=a(19),w=(a(47),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={gameTime:30,isSelected:!1,actualQuestion:0},e.getQuestions=e.getQuestions.bind(Object(b.a)(e)),e.onClick=e.onClick.bind(Object(b.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(b.a)(e)),e.setGameTime=e.setGameTime.bind(Object(b.a)(e)),e.setTimerGlobal=e.setTimerGlobal.bind(Object(b.a)(e)),e.correctAnswer=e.correctAnswer.bind(Object(b.a)(e)),e}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token;(0,e.dispatch)(function(e){return function(t){var a;return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.awrap(E(e));case 3:a=n.sent,t({type:"SET_QUESTIONS",questions:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}}(t)),this.setTimerGlobal()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.player;1===t.gameTime&&clearInterval(this.intervalTime),localStorage.setItem("state",JSON.stringify({player:a}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalTime),this.setGameTime()}},{key:"onClick",value:function(e){"correct-answer"===e.target.className&&this.correctAnswer(),this.setState({isSelected:!0});var t=this.state.gameTime;clearInterval(this.intervalTime),this.setState({gameTime:t})}},{key:"setTimerGlobal",value:function(){var e=this;this.intervalTime=setInterval((function(){e.setState((function(e){return{gameTime:e.gameTime-1,isSelected:1===e.gameTime}}))}),1e3)}},{key:"setGameTime",value:function(){this.setState({gameTime:30})}},{key:"getQuestions",value:function(){var e=this,t=this.state.isSelected;return this.props.questions.map((function(a){var n=a.incorrect_answers,i=[].concat(Object(S.a)(n),[a.correct_answer]).sort();return r.a.createElement("div",{key:a.correct_answer},r.a.createElement("h2",{"data-testid":"question-category"},a.category),r.a.createElement("p",{"data-testid":"question-text"},a.question),i.map((function(n,i){return n===a.correct_answer?r.a.createElement("button",{key:"correct-answer",type:"button","data-testid":"correct-answer",className:"correct-answer",onClick:e.onClick,difficulty:a.difficulty,disabled:t},n):r.a.createElement("button",{key:"wrong-answer-".concat(i),type:"button","data-testid":"wrong-answer-".concat(i),className:"wrong-answer",onClick:e.onClick,difficulty:a.difficulty,disabled:t},n)})))}))}},{key:"correctAnswer",value:function(){var e=1,t=this.state,a=t.gameTime,n=t.actualQuestion,r=this.props,i=r.questions,c=r.dispatch,s=r.player,o=s.assertions+1;switch(i[n].difficulty){case"hard":e=3;break;case"medium":e=2;break;default:e=1}c(function(e,t,a){var n=Object(y.a)({},e);return n.score=t+e.score,n.assertions=a,localStorage.setItem("state",JSON.stringify({player:n})),{type:"SET_UPDATE_SCORE",score:t,assertions:a}}(s,10+a*e,o))}},{key:"nextQuestion",value:function(){var e=this.state.actualQuestion,t=this.props.history;e<4?this.setState((function(e){return{actualQuestion:e.actualQuestion+1,isSelected:!1}})):t.push("./feedback"),this.setGameTime(),this.setTimerGlobal()}},{key:"render",value:function(){var e=this.props.token,t=this.state,a=t.actualQuestion,n=t.isSelected,i=t.gameTime;return r.a.createElement("div",{className:"teste"},e?this.getQuestions()[a]:"",n&&r.a.createElement("button",{"data-testid":"btn-next",type:"button",onClick:this.nextQuestion,disabled:!n},"Pr\xf3xima"),r.a.createElement("p",null,i))}}]),t}(n.Component)),C=Object(s.b)((function(e){return{token:e.token,questions:e.questions,player:e.player}}))(w),T=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).catchPicture=e.catchPicture.bind(Object(b.a)(e)),e}return Object(v.a)(t,e),Object(p.a)(t,[{key:"catchPicture",value:function(){var e=this.props,t=e.ranking,a=e.name,n=t.find((function(e){return e.name===a}));return n?n.picture:""}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.history,n=e.score;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",alt:"Foto do perfil",src:this.catchPicture()}),r.a.createElement("p",{"data-testid":"header-player-name"},t),r.a.createElement("p",{"data-testid":"header-score"},n)),r.a.createElement(C,{history:a}))}}]),t}(r.a.Component),_=Object(s.b)((function(e){return{name:e.player.name,ranking:e.ranking,score:e.player.score}}))(T),x=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Possui um titulo")}}]),t}(r.a.Component),R=a(30),I=a.n(R);var N=function(e){var t=I()(e).toString();return"".concat("https://www.gravatar.com/avatar/").concat(t)},G=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.name,n=e.score,i=N(t);return r.a.createElement("div",null,r.a.createElement("img",{src:i,alt:"","data-testid":"header-profile-picture"}),r.a.createElement("h1",{"data-testid":"header-player-name"},a),r.a.createElement("h2",{"data-testid":"header-score"},n))}}]),t}(n.Component),A=Object(s.b)((function(e){return{email:e.player.email,name:e.player.name,score:e.player.score}}))(G),Q=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onButtonClick=a.onButtonClick.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"onButtonClick",value:function(e){var t=this.props,a=t.history,n=t.dispatch,r=t.name,i=t.email,c=t.score;localStorage.setItem("state",JSON.stringify({player:{name:"",assertions:[],score:0,gravatarEmail:""}})),n({type:"RESET_PLAYER_SCORE_AND_ASSERTIONS"});var s=N(i);n({type:"GET_USER_RANKING",payload:{name:r,picture:s,score:c}}),a.push(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.assertions,n=t.score;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),a<3?r.a.createElement("h1",{"data-testid":"feedback-text"},"Podia ser melhor..."):r.a.createElement("h1",{"data-testid":"feedback-text"},"Mandou bem!"),r.a.createElement("h2",{"data-testid":"feedback-total-score"},n),r.a.createElement("h3",{"data-testid":"feedback-total-question"},a),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){return e.onButtonClick("/")}},"Jogar novamente"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:function(){return e.onButtonClick("/ranking")}},"Ver Ranking"))}}]),t}(r.a.Component),P=Object(s.b)((function(e){return{assertions:e.player.assertions,score:e.player.score,name:e.player.name,email:e.player.gravatarEmail,ranking:e.ranking}}))(Q),q=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onClick=a.onClick.bind(Object(b.a)(a)),a.state={ranking:[]},a.updateRanking=a.updateRanking.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.updateRanking()}},{key:"onClick",value:function(){this.props.history.push("/")}},{key:"updateRanking",value:function(){var e=this.props.ranking;this.setState({ranking:e})}},{key:"render",value:function(){var e=this.state.ranking;return console.log(e),r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("article",{key:t},r.a.createElement("img",{src:e.picture,alt:e.name}),r.a.createElement("h2",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("h3",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:this.onClick},"Voltar ao In\xedcio"))}}]),t}(n.Component),U=Object(s.b)((function(e){return{ranking:e.ranking}}))(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(15),J=a(32),B=a(33),K={name:"",assertions:0,score:0,gravatarEmail:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET-USER":return Object(y.a)({},e,{name:t.data.name,gravatarEmail:t.data.email});case"SET_UPDATE_SCORE":return Object(y.a)({},e,{score:e.score+t.score,assertions:t.assertions});case"RESET_PLAYER_SCORE_AND_ASSERTIONS":return Object(y.a)({},e,{score:0,assertions:0});default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLAYER_TOKEN":return t.token;default:return e}},W=[],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(localStorage.setItem("ranking",JSON.stringify([].concat(Object(S.a)(e),[t.payload]))),t.type){case"GET_USER_RANKING":return[].concat(Object(S.a)(e),[t.payload]);default:return e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUESTIONS":return t.questions;default:return e}},V=Object(D.combineReducers)({player:L,token:M,ranking:Y,questions:F}),$=Object(D.createStore)(V,Object(J.composeWithDevTools)(Object(D.applyMiddleware)(B.a)));window.Cypress&&(window.store=$);var z=$;c.a.render(r.a.createElement(o.a,{basename:"/project-trivia-react-redux"},r.a.createElement(s.a,{store:z},r.a.createElement((function(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:j}),r.a.createElement(l.a,{path:"/game",component:_}),r.a.createElement(l.a,{path:"/settings",component:x}),r.a.createElement(l.a,{path:"/feedback",component:P}),r.a.createElement(l.a,{path:"/ranking",component:U}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.3f6ccbf8.chunk.js.map